{% extends 'shopapp/base.html' %}
{% load l10n %}

{% block title %}
  –ó–∞–∫–∞–∑ ‚Ññ{{ object.pk }} ‚Äî –î–µ—Ç–∞–ª–∏
{% endblock %}

{% block body %}
  <article class="order-detail card">
    <header class="order-header">
      <h1 class="order-title">–ó–∞–∫–∞–∑ ‚Ññ{{ object.pk }}</h1>
      <p class="order-meta">
        <span>–æ—Ç {{ object.created_at|date:"d E Y –≤ H:i" }}</span>
        {% if object.user %}
          ‚Ä¢ –∫–ª–∏–µ–Ω—Ç: <strong>{% firstof object.user.get_full_name object.user.username %}</strong>
        {% endif %}
      </p>
    </header>

    <div class="order-info grid">
      <div class="info-section">
        <h2 class="section-title">–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∑–∞–∫–∞–∑–µ</h2>
        <dl class="info-list">
          <div>
            <dt>–ü—Ä–æ–º–æ–∫–æ–¥:</dt>
            <dd>
              {% if object.promocode %}
                <code class="tag promo-tag">{{ object.promocode|upper }}</code>
              {% else %}
                <span class="text-muted">‚Äî</span>
              {% endif %}
            </dd>
          </div>
          <div>
            <dt>–ê–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏:</dt>
            <dd>
              {% if object.delivery_address %}
                {{ object.delivery_address|linebreaksbr }}
              {% else %}
                <span class="text-muted">–ù–µ —É–∫–∞–∑–∞–Ω</span>
              {% endif %}
            </dd>
          </div>
          <div>
            <dt>–ö–æ–Ω—Ç–∞–∫—Ç:</dt>
            <dd>
              {% if object.phone %}
                üìû {{ object.phone }}
              {% else %}
                <span class="text-muted">‚Äî</span>
              {% endif %}
            </dd>
          </div>
        </dl>
      </div>

      <div class="info-section">
        <h2 class="section-title">
          –¢–æ–≤–∞—Ä{% if object.products.count == 1 %}{{ "" }}{% else %}—ã{% endif %}
          ({{ object.products.count }})
        </h2>
        {% if object.products.exists %}
          <ul class="product-list">
            {% for product in object.products.all %}
              <li class="product-item">
                <span class="product-name">{{ product.name }}</span>
                <span class="product-price">
                  {% localize on %}
                    {{ product.price|floatformat:2 }} ‚ÇΩ
                  {% endlocalize %}
                </span>
              </li>
            {% endfor %}
          </ul>
        {% else %}
          <p class="text-muted">–í –∑–∞–∫–∞–∑–µ –Ω–µ—Ç —Ç–æ–≤–∞—Ä–æ–≤.</p>
        {% endif %}
      </div>
    </div>

    <footer class="order-actions">
      <a href="{% url 'shopapp:orders_list' %}" class="btn btn-outline">&larr; –ù–∞–∑–∞–¥ –∫ —Å–ø–∏—Å–∫—É –∑–∞–∫–∞–∑–æ–≤</a>
      <!-- –°—é–¥–∞ –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å: "–ü–µ—á–∞—Ç—å", "–û—Ç–º–µ–Ω–∏—Ç—å", "–ò–∑–º–µ–Ω–∏—Ç—å" ‚Äî –ø–æ –ø—Ä–∞–≤–∞–º -->
    </footer>
  </article>
{% endblock %}