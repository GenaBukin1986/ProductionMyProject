{% extends 'shopapp/base.html' %}
{% load l10n static %}

{% block title %}
  –ö–∞—Ç–∞–ª–æ–≥ —Ç–æ–≤–∞—Ä–æ–≤
{% endblock %}

{% block header %}
  <div class="header-content">
    <h1 class="page-title">–ö–∞—Ç–∞–ª–æ–≥ —Ç–æ–≤–∞—Ä–æ–≤</h1>
    <a href="{% url 'shopapp:product_create' %}" class="btn btn-primary">+ –î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä</a>
  </div>
{% endblock %}

{% block body %}
  {% if products %}
    <div class="products-grid">
      {% for product in products %}
        <article class="product-card card">
          <div class="product-image-wrapper">
            {% if product.preview %}
              <img
                src="{{ product.preview.url }}"
                alt="{{ product.name|default:'–¢–æ–≤–∞—Ä' }}"
                class="product-image"
                loading="lazy"
              >
            {% else %}
              <div class="product-placeholder" aria-hidden="true">
                <span>üì∑</span>
              </div>
            {% endif %}
          </div>

          <div class="product-info">
            <h2 class="product-name">
              <a href="{% url 'shopapp:product_details' pk=product.pk %}" class="product-link">
                {{ product.name }}
              </a>
            </h2>

            <div class="product-price-group">
              {% if product.discount and product.discount > 0 %}
                <div class="price-with-discount">
                  <span class="price-current">
                    {% localize on %}{{ product.price|floatformat:2 }}{% endlocalize %} ‚ÇΩ
                  </span>
                  <span class="price-old">
                    {% localize on %}{{ product.price|add:product.discount|floatformat:2 }}{% endlocalize %} ‚ÇΩ
                  </span>
                </div>
                <span class="badge discount-badge">‚àí{{ product.discount }} ‚ÇΩ</span>
              {% else %}
                <span class="price-current standalone">
                  {% localize on %}{{ product.price|floatformat:2 }}{% endlocalize %} ‚ÇΩ
                </span>
              {% endif %}
            </div>

            <div class="product-actions">
              <a href="{% url 'shopapp:product_details' pk=product.pk %}" class="btn btn-outline">–ü–æ–¥—Ä–æ–±–Ω–µ–µ</a>
            </div>
          </div>
        </article>
      {% endfor %}
    </div>
  {% else %}
    <div class="empty-state">
      <h2 class="empty-title">–¢–æ–≤–∞—Ä–æ–≤ –ø–æ–∫–∞ –Ω–µ—Ç</h2>
      <p class="empty-text">–î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–≤—ã–π —Ç–æ–≤–∞—Ä ‚Äî –∏ –æ–Ω –ø–æ—è–≤–∏—Ç—Å—è –≤ –∫–∞—Ç–∞–ª–æ–≥–µ.</p>
      <a href="{% url 'shopapp:product_create' %}" class="btn btn-primary">–î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä</a>
    </div>
  {% endif %}
{% endblock %}